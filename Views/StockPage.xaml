<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="vyaparsathi.Views.StockPage"
    Title="Stock"
    BackgroundColor="#F3F4F6">

    <ScrollView>
        <VerticalStackLayout Spacing="20">

            <!-- HEADER
            <Grid BackgroundColor="#2563EB" Padding="20">
                <VerticalStackLayout>
                    <Label Text="Stock"
                           FontSize="26"
                           FontAttributes="Bold"
                           TextColor="White"/>
                    <Label Text="Stock Management"
                           FontSize="14"
                           TextColor="#DBEAFE"/>
                </VerticalStackLayout>
            </Grid> -->

            <!-- DASHBOARD SUMMARY CARDS -->
            <Grid ColumnSpacing="14" RowSpacing="14" Padding="20,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Total Categories -->
                <Frame BackgroundColor="#E0F7FA" CornerRadius="16" Padding="14">
                    <VerticalStackLayout>
                        <Label Text="Total Categories"
                               FontSize="12"
                               TextColor="#006064"/>
                        <Label x:Name="TotalCategoriesLabel"
                               FontSize="20"
                               FontAttributes="Bold"
                               TextColor="#004D40"/>
                    </VerticalStackLayout>
                </Frame>

                <!-- Total Items -->
                <Frame Grid.Column="1" BackgroundColor="#FFF3E0" CornerRadius="16" Padding="14">
                    <VerticalStackLayout>
                        <Label Text="Total Items"
                               FontSize="12"
                               TextColor="#E65100"/>
                        <Label x:Name="TotalItemsLabel"
                               FontSize="20"
                               FontAttributes="Bold"
                               TextColor="#BF360C"/>
                    </VerticalStackLayout>
                </Frame>

                <!-- Total Quantity -->
                <Frame Grid.Column="2" BackgroundColor="#E8F5E9" CornerRadius="16" Padding="14">
                    <VerticalStackLayout>
                        <Label Text="Total Quantity"
                               FontSize="12"
                               TextColor="#2E7D32"/>
                        <Label x:Name="TotalQuantityLabel"
                               FontSize="20"
                               FontAttributes="Bold"
                               TextColor="#1B5E20"/>
                    </VerticalStackLayout>
                </Frame>

                <!-- Low Stock -->
                <Frame Grid.Row="1" BackgroundColor="#DCFCE7" CornerRadius="16" Padding="14">
                    <VerticalStackLayout>
                        <Label Text="Low Stock"
                               FontSize="12"
                               TextColor="#166534"/>
                        <Label x:Name="LowStockLabel"
                               FontSize="20"
                               FontAttributes="Bold"
                               TextColor="#14532D"/>
                    </VerticalStackLayout>
                </Frame>

                <!-- Out of Stock -->
                <Frame Grid.Row="1" Grid.Column="1" BackgroundColor="#FEE2E2" CornerRadius="16" Padding="14">
                    <VerticalStackLayout>
                        <Label Text="Out of Stock"
                               FontSize="12"
                               TextColor="#991B1B"/>
                        <Label x:Name="OutOfStockLabel"
                               FontSize="20"
                               FontAttributes="Bold"
                               TextColor="#7F1D1D"/>
                    </VerticalStackLayout>
                </Frame>

                <!-- Inventory Value -->
                <Frame Grid.Row="1" Grid.Column="2" BackgroundColor="#E0F2FE" CornerRadius="16" Padding="14">
                    <VerticalStackLayout>
                        <Label Text="Inventory Value"
                               FontSize="12"
                               TextColor="#0369A1"/>
                        <Label x:Name="TotalInventoryValueLabel"
                               FontSize="20"
                               FontAttributes="Bold"
                               TextColor="#0C4A6E"/>
                    </VerticalStackLayout>
                </Frame>
            </Grid>

            <!-- ITEM LIST -->
            <Frame BackgroundColor="White" CornerRadius="18" Padding="16" Margin="20,0">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Items"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="#0F172A"/>

                    <CollectionView x:Name="ItemsCollection"
                                    SelectionMode="None">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Grid Padding="8" ColumnSpacing="12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <Label Text="{Binding Name}"
                                           FontAttributes="Bold"
                                           TextColor="#0F172A"/>

                                    <Label Text="{Binding StockQuantity, StringFormat='In Stock: {0}'}"
                                           Grid.Column="1"
                                           TextColor="#2563EB"/>
                                </Grid>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Frame>

            <!-- CATEGORY-WISE STOCK -->
            <Frame BackgroundColor="White" CornerRadius="18" Padding="16" Margin="20,0">
                <VerticalStackLayout>
                    <Label Text="Category-wise Stock"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="#0F172A"/>
                    <CollectionView x:Name="CategoryStockCollection"
                                    SelectionMode="None">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Grid Padding="8" ColumnSpacing="12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <Label Text="{Binding Name}"
                                           FontAttributes="Bold"
                                           TextColor="#0F172A"/>

                                    <Label Text="{Binding Quantity, StringFormat='Stock: {0}'}"
                                           Grid.Column="1"
                                           TextColor="#2563EB"/>
                                </Grid>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Frame>

            <!-- UPDATE STOCK -->
            <Frame BackgroundColor="White" CornerRadius="18" Padding="18" Margin="20,0">
                <VerticalStackLayout Spacing="16">

                    <Label Text="Update Stock"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="#0F172A"/>

                    <!-- Category Picker -->
                    <Picker x:Name="CategoryPicker"
                            Title="Select Category"
                            SelectedIndexChanged="OnCategoryChanged"/>

                    <!-- Item Picker -->
                    <Picker x:Name="ItemPicker"
                            Title="Select Item"
                            SelectedIndexChanged="OnItemChanged"/>

                    <Entry x:Name="PriceEntry"
                           Placeholder="Selling Price"
                           IsReadOnly="True"
                           BackgroundColor="#F1F5F9"/>

                    <Entry x:Name="StockEntry"
                           Placeholder="Enter quantity"
                           Keyboard="Numeric"/>

                    <Button Text="Save Stock"
                            HeightRequest="52"
                            CornerRadius="16"
                            FontAttributes="Bold"
                            BackgroundColor="#2563EB"
                            TextColor="White"
                            Clicked="OnSaveStockClicked"/>
                </VerticalStackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
