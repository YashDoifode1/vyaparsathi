<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="vyaparsathi.Views.AddCategoryPage"
    Title="Categories"
    BackgroundColor="#F8FAFC">

    <VerticalStackLayout Padding="20" Spacing="24">

        <!-- Page Header -->
        <VerticalStackLayout Spacing="4">
            <Label Text="Categories"
                   FontSize="26"
                   FontAttributes="Bold"
                   TextColor="#0F172A"/>

            <Label Text="Create and manage product categories"
                   FontSize="14"
                   TextColor="#64748B"/>
        </VerticalStackLayout>

        <!-- Search -->
        <Frame BackgroundColor="White"
               CornerRadius="14"
               Padding="12"
               HasShadow="True">
            <Entry x:Name="SearchEntry"
                   Placeholder="Search categories"
                   FontSize="15"
                   ClearButtonVisibility="WhileEditing"
                   TextChanged="OnSearchTextChanged"/>
        </Frame>

        <!-- Add / Edit Category -->
        <Frame BackgroundColor="White"
               CornerRadius="18"
               Padding="18"
               HasShadow="True">

            <VerticalStackLayout Spacing="16">

                <Label x:Name="FormTitle"
                       Text="Add New Category"
                       FontSize="20"
                       FontAttributes="Bold"
                       TextColor="#0F172A"/>

                <Entry x:Name="CategoryNameEntry"
                       Placeholder="Category name"
                       HeightRequest="48"
                       FontSize="15"
                       BackgroundColor="#F1F5F9"/>

                <Editor x:Name="CategoryDescriptionEditor"
                        Placeholder="Description (optional)"
                        HeightRequest="90"
                        FontSize="14"
                        BackgroundColor="#F1F5F9"/>

                <Button x:Name="SaveButton"
                        Text="Save"
                        HeightRequest="50"
                        CornerRadius="14"
                        FontAttributes="Bold"
                        BackgroundColor="#2563EB"
                        TextColor="White"
                        Clicked="OnSaveClicked"/>
            </VerticalStackLayout>
        </Frame>

        <!-- Category List Title -->
        <Label Text="All Categories"
               FontSize="18"
               FontAttributes="Bold"
               TextColor="#0F172A"/>

        <!-- Category List -->
        <CollectionView x:Name="CategoryCollectionView"
                        SelectionMode="None"
                        VerticalOptions="FillAndExpand"
                        ItemsLayout="VerticalList">

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame BackgroundColor="White"
                           CornerRadius="16"
                           Padding="16"
                           Margin="0,8"
                           HasShadow="True">

                        <Grid ColumnSpacing="12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <!-- Category Info -->
                            <VerticalStackLayout Spacing="4">
                                <Label Text="{Binding Name}"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="#0F172A"/>

                                <Label Text="{Binding Description}"
                                       FontSize="13"
                                       TextColor="#64748B"/>

                                <Label Text="{Binding CreatedAt, StringFormat='Created {0:dd MMM yyyy}'}"
                                       FontSize="12"
                                       TextColor="#94A3B8"/>
                            </VerticalStackLayout>

                            <!-- Actions -->
                            <HorizontalStackLayout Grid.Column="1"
                                                   Spacing="10"
                                                   VerticalOptions="Center">

                                <Button Text="Edit"
                                        FontSize="13"
                                        Padding="12,6"
                                        CornerRadius="10"
                                        BackgroundColor="#E0F2FE"
                                        TextColor="#0369A1"
                                        Clicked="OnEditClicked"
                                        CommandParameter="{Binding}"/>

                                <Button Text="Delete"
                                        FontSize="13"
                                        Padding="12,6"
                                        CornerRadius="10"
                                        BackgroundColor="#FEE2E2"
                                        TextColor="#B91C1C"
                                        Clicked="OnDeleteClicked"
                                        CommandParameter="{Binding}"/>
                            </HorizontalStackLayout>

                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>

        </CollectionView>

    </VerticalStackLayout>
</ContentPage>
