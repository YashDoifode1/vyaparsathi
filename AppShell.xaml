<?xml version="1.0" encoding="utf-8" ?>
<Shell
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:views="clr-namespace:vyaparsathi.Views"
    x:Class="vyaparsathi.AppShell"
    FlyoutBehavior="Flyout"
    Shell.TabBarBackgroundColor="#FFFFFF"
    Shell.TabBarForegroundColor="#111827"
    Shell.TabBarUnselectedColor="#6B7280"
    Shell.TabBarTitleColor="#111827">

    <!-- ========================== -->
    <!-- FLYOUT HEADER: PROFILE -->
    <!-- ========================== -->
    <Shell.FlyoutHeader>
        <Grid Padding="20" BackgroundColor="#2563EB" HeightRequest="140">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- Profile Image -->
            <Frame CornerRadius="40" HeightRequest="80" WidthRequest="80" BackgroundColor="White" HasShadow="True">
                <Image Source="profile_placeholder.png" Aspect="AspectFill"/>
            </Frame>

            <!-- Profile Info -->
            <VerticalStackLayout Grid.Column="1" Padding="10" VerticalOptions="Center">
                <Label Text="Vyaparsathi" FontSize="20" FontAttributes="Bold" TextColor="White"/>
                <Label Text="Manage your business efficiently" FontSize="14" TextColor="#E0E7FF"/>
            </VerticalStackLayout>
        </Grid>
    </Shell.FlyoutHeader>

    <!-- ========================== -->
    <!-- FLYOUT ITEMS -->
    <!-- ========================== -->
    <FlyoutItem Title="Dashboard" Icon="home.png">
        <ShellContent Title="Dashboard" ContentTemplate="{DataTemplate views:DashboardPage}" />
    </FlyoutItem>

    <FlyoutItem Title="Billing" Icon="billing.png">
        <ShellContent Title="Create Bill" ContentTemplate="{DataTemplate views:BillingPage}" />
        <ShellContent Title="Billing History" ContentTemplate="{DataTemplate views:BillingHistoryPage}" />
    </FlyoutItem>

    <FlyoutItem Title="Udhar / Credit" Icon="udhar.png">
        <ShellContent Title="Udhar Entry" ContentTemplate="{DataTemplate views:UdharPage}" />
        <ShellContent Title="Customers" ContentTemplate="{DataTemplate views:CustomersPage}" />
    </FlyoutItem>

    <FlyoutItem Title="Stock Management" Icon="stock.png">
        <ShellContent Title="Stock" ContentTemplate="{DataTemplate views:StockPage}" />
        <ShellContent Title="Add Category" ContentTemplate="{DataTemplate views:AddCategoryPage}" />
        <ShellContent Title="Add Item" ContentTemplate="{DataTemplate views:AddItemPage}" />
    </FlyoutItem>

    <FlyoutItem Title="Settings" Icon="settings.png">
        <ShellContent Title="Settings" ContentTemplate="{DataTemplate views:SettingsPage}" />
    </FlyoutItem>

    <!-- ========================== -->
    <!-- BOTTOM TAB BAR -->
    <!-- ========================== -->
    <TabBar>
        <Tab Title="Home" Icon="home.png">
            <ShellContent Route="homeTab" ContentTemplate="{DataTemplate views:DashboardPage}" />
        </Tab>
        <Tab Title="Billing" Icon="billing.png">
            <ShellContent Route="billingTab" ContentTemplate="{DataTemplate views:BillingPage}" />
        </Tab>
        <Tab Title="Udhar" Icon="udhar.png">
            <ShellContent Route="udharTab" ContentTemplate="{DataTemplate views:UdharPage}" />
        </Tab>
        <Tab Title="Stock" Icon="stock.png">
            <ShellContent Route="stockTab" ContentTemplate="{DataTemplate views:StockPage}" />
        </Tab>
    </TabBar>

    <!-- ========================== -->
    <!-- GLOBAL STYLES -->
    <!-- ========================== -->
    <Shell.Resources>
        <ResourceDictionary>
            <!-- Flyout Item Style -->
            <Style TargetType="FlyoutItem">
                <Setter Property="Shell.BackgroundColor" Value="White"/>
                <Setter Property="Shell.ForegroundColor" Value="#111827"/>
                <Setter Property="Shell.TitleColor" Value="#111827"/>
            </Style>

            <Style TargetType="Tab">
                <Setter Property="Shell.TabBarBackgroundColor" Value="#FFFFFF"/>
                <Setter Property="Shell.TabBarForegroundColor" Value="#111827"/>
                <Setter Property="Shell.TabBarUnselectedColor" Value="#6B7280"/>
            </Style>
        </ResourceDictionary>
    </Shell.Resources>

</Shell>
